---
title: "Check Balances"
description: "Learn how to check available balances for your AI Agent and customers"
icon: "wallet"
---

The Balances API provides methods to check available funds for both your AI Agent and your customers. This documentation covers how to retrieve real-time balance information across different currencies.

## Understanding Balances

A balance is considered "spendable" when:

-   Funds have been fully settled and verified
-   Funds aren't reserved for pending operations
-   Funds aren't subject to any holds or restrictions

## Agent Balance

### Get Your Agent's Spendable Balance

Retrieve your AI Agent's available balance in a specific currency:

```python
agent_balance = payman.balances.get_spendable_balance("USD")
print(f"Available balance: ${agent_balance:.2f}")  # e.g., "Available balance: $150.00"
```

#### Parameters

| Parameter  | Type | Required | Description                         |
| ---------- | ---- | -------- | ----------------------------------- |
| `currency` | str  | Yes      | Currency code (e.g., 'USD', 'USDC') |

#### Response

Returns a float representing the spendable balance in the specified currency:

```python
42.50  # $42.50 USD
```

## Customer Balance

### Get a Customer's Spendable Balance

Check a specific customer's available balance:

```python
customer_balance = payman.balances.get_customer_spendable_balance(
    "USD",       # Currency
    "cust_123"   # Customer ID
)
print(f"Customer balance: ${customer_balance:.2f}")
```

#### Parameters

| Parameter     | Type | Required | Description                                       |
| ------------- | ---- | -------- | ------------------------------------------------- |
| `currency`    | str  | Yes      | Currency code (e.g., 'USD', 'USDC')               |
| `customer_id` | str  | Yes      | Your system's customer ID or Payman's customer ID |

#### Response

Returns a float representing the customer's spendable balance:

```python
75.25  # $75.25 USD
```

## Balance Format by Currency

Different currencies use different decimal precision in their representations:

| Currency | Format           | Example                 |
| -------- | ---------------- | ----------------------- |
| USD      | 2 decimal places | `50.00` means $50.00    |
| EUR      | 2 decimal places | `42.50` means â‚¬42.50    |
| USDC     | 6 decimal places | `1.000000` means 1 USDC |

## Multiple Wallet Support

If your agent has multiple wallets, you can specify which wallet to check:

```python
# Check balance in a specific wallet
wallet_balance = payman.balances.get_spendable_balance(
    "USD",
    wallet_id="wallet_456"
)

print(f"Wallet balance: ${wallet_balance:.2f}")
```

## Advanced Usage

### Check Multiple Balances

Retrieve balances across different currencies:

```python
def check_multiple_currencies():
    # Get balances for different currencies
    usd_balance = payman.balances.get_spendable_balance("USD")
    usdc_balance = payman.balances.get_spendable_balance("USDC")

    print(f"USD Balance: ${usd_balance:.2f}")
    print(f"USDC Balance: {usdc_balance:.6f} USDC")

    return {"USD": usd_balance, "USDC": usdc_balance}
```

### Compare Agent and Customer Balances

Check both agent and customer balances simultaneously:

```python
def compare_balances(customer_id, currency="USD"):
    # Get both balances
    agent_balance = payman.balances.get_spendable_balance(currency)
    customer_balance = payman.balances.get_customer_spendable_balance(
        currency,
        customer_id
    )

    print(f"Agent balance: ${agent_balance:.2f}")
    print(f"Customer balance: ${customer_balance:.2f}")

    # Determine if the agent can cover a customer transaction
    can_cover_transaction = agent_balance >= customer_balance
    print(f"Agent can cover customer balance: {'Yes' if can_cover_transaction else 'No'}")

    return {
        "agent_balance": agent_balance,
        "customer_balance": customer_balance,
        "can_cover_transaction": can_cover_transaction
    }
```

## Error Handling

Implement proper error handling to manage API exceptions:

```python
from paymanai.errors import PaymanError

try:
    balance = payman.balances.get_customer_spendable_balance(
        "USD",
        "cust_123"
    )
    print(f"Customer balance: ${balance:.2f}")
except PaymanError as error:
    if error.code == "customer_not_found":
        print("Customer not found in the system")
    elif error.code == "invalid_currency":
        print("The specified currency is not supported")
    elif error.code == "wallet_not_found":
        print("The specified wallet does not exist")
    elif error.code == "permission_denied":
        print("Your agent lacks permission to view this balance")
    else:
        print("Failed to retrieve balance:", error.message)
```

## Using Type Hints

For better code safety and IDE support:

```python
from typing import Dict, Union, Optional
from decimal import Decimal

def get_formatted_balance(
    currency: str,
    customer_id: Optional[str] = None,
    wallet_id: Optional[str] = None
) -> Dict[str, Union[float, str, bool]]:
    """
    Get a formatted balance with additional metadata.

    Args:
        currency: Currency code (USD, USDC, etc.)
        customer_id: Optional customer ID to check
        wallet_id: Optional wallet ID for specific wallet

    Returns:
        Dictionary with balance and formatting information
    """
    try:
        if customer_id:
            amount = payman.balances.get_customer_spendable_balance(
                currency,
                customer_id
            )
            balance_type = "customer"
        else:
            amount = payman.balances.get_spendable_balance(
                currency,
                wallet_id=wallet_id
            )
            balance_type = "agent"

        # Format according to currency type
        if currency in ["USD", "EUR"]:
            formatted = f"{amount:.2f}"
            decimal_places = 2
        elif currency == "USDC":
            formatted = f"{amount:.6f}"
            decimal_places = 6
        else:
            formatted = str(amount)
            decimal_places = 8

        return {
            "amount": amount,
            "formatted": formatted,
            "currency": currency,
            "type": balance_type,
            "decimal_places": decimal_places,
            "is_zero": amount == 0
        }
    except PaymanError as error:
        return {
            "error": True,
            "message": error.message,
            "code": error.code
        }
```

<Note>
	**Currency Formatting:** Balances are always returned as float values in the
	currency's natural units. To display them properly to users, you should
	format according to the currency standard (e.g., using `:.2f` for USD to
	show cents, or `:.6f` for USDC to show micro-units).
</Note>
