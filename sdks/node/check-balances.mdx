---
title: "Check Balances"
description: "Learn how to check available balances for your AI Agent and customers"
icon: "wallet"
---

The Balances API provides methods to check available funds for both your AI Agent and your customers. This documentation covers how to retrieve real-time balance information across different currencies.

## Understanding Balances

A balance is considered "spendable" when:

-   Funds have been fully settled and verified
-   Funds aren't reserved for pending operations
-   Funds aren't subject to any holds or restrictions

## Agent Balance

### Get Your Agent's Spendable Balance

Retrieve your AI Agent's available balance in a specific currency:

```typescript
const agentBalance = await payman.balances.getSpendableBalance("USD");
console.log(`Available balance: $${agentBalance.toFixed(2)}`); // e.g., "Available balance: $150.00"
```

#### Parameters

| Parameter  | Type   | Required | Description                         |
| ---------- | ------ | -------- | ----------------------------------- |
| `currency` | string | Yes      | Currency code (e.g., 'USD', 'USDC') |

#### Response

Returns a number representing the spendable balance in the specified currency:

```typescript
42.5; // $42.50 USD
```

## Customer Balance

### Get a Customer's Spendable Balance

Check a specific customer's available balance:

```typescript
const customerBalance = await payman.balances.getCustomerSpendableBalance(
	"USD", // Currency
	"cust_123" // Customer ID
);
console.log(`Customer balance: $${customerBalance.toFixed(2)}`);
```

#### Parameters

| Parameter    | Type   | Required | Description                                       |
| ------------ | ------ | -------- | ------------------------------------------------- |
| `currency`   | string | Yes      | Currency code (e.g., 'USD', 'USDC')               |
| `customerId` | string | Yes      | Your system's customer ID or Payman's customer ID |

#### Response

Returns a number representing the customer's spendable balance:

```typescript
75.25; // $75.25 USD
```

## Balance Format by Currency

Different currencies use different decimal precision in their representations:

| Currency | Format           | Example                           |
| -------- | ---------------- | --------------------------------- |
| USD      | 2 decimal places | `50.00` means $50.00              |
| EUR      | 2 decimal places | `42.50` means â‚¬42.50              |
| USDC     | 6 decimal places | `1.000000` means 1 USDC           |
| BTC      | 8 decimal places | `0.00123456` means 0.00123456 BTC |

## Multiple Wallet Support

If your agent has multiple wallets, you can specify which wallet to check:

```typescript
// Check balance in a specific wallet
const walletBalance = await payman.balances.getSpendableBalance("USD", {
	walletId: "wallet_456",
});

console.log(`Wallet balance: $${walletBalance.toFixed(2)}`);
```

## Advanced Usage

### Check Multiple Balances

Retrieve balances across different currencies:

```typescript
async function checkMultipleCurrencies() {
	const [usdBalance, usdcBalance] = await Promise.all([
		payman.balances.getSpendableBalance("USD"),
		payman.balances.getSpendableBalance("USDC"),
	]);

	console.log(`USD Balance: $${usdBalance.toFixed(2)}`);
	console.log(`USDC Balance: ${usdcBalance.toFixed(6)} USDC`);
}
```

### Compare Agent and Customer Balances

Check both agent and customer balances simultaneously:

```typescript
async function compareBalances(customerId, currency = "USD") {
	const [agentBalance, customerBalance] = await Promise.all([
		payman.balances.getSpendableBalance(currency),
		payman.balances.getCustomerSpendableBalance(currency, customerId),
	]);

	console.log(`Agent balance: $${agentBalance.toFixed(2)}`);
	console.log(`Customer balance: $${customerBalance.toFixed(2)}`);

	// Determine if the agent can cover a customer transaction
	const canCoverTransaction = agentBalance >= customerBalance;
	console.log(
		`Agent can cover customer balance: ${
			canCoverTransaction ? "Yes" : "No"
		}`
	);

	return { agentBalance, customerBalance, canCoverTransaction };
}
```

## Error Handling

Implement proper error handling to manage API exceptions:

```typescript
try {
	const balance = await payman.balances.getCustomerSpendableBalance(
		"USD",
		"cust_123"
	);
	console.log(`Customer balance: $${balance.toFixed(2)}`);
} catch (error) {
	if (error.code === "customer_not_found") {
		console.error("Customer not found in the system");
	} else if (error.code === "invalid_currency") {
		console.error("The specified currency is not supported");
	} else if (error.code === "wallet_not_found") {
		console.error("The specified wallet does not exist");
	} else if (error.code === "permission_denied") {
		console.error("Your agent lacks permission to view this balance");
	} else {
		console.error("Failed to retrieve balance:", error.message);
	}
}
```

<Note>
	**Currency Formatting:** Balances are always returned as numbers in the
	currency's natural units. To display them properly to users, you should
	format according to the currency standard (e.g., using `toFixed(2)` for USD
	to show cents, or `toFixed(6)` for USDC to show micro-units).
</Note>
