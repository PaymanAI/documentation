---
title: "Search Payees"
description: "Learn how to search for existing payment destinations"
icon: "magnifying-glass"
---

Payman provides flexible search capabilities to help you find and manage your AI Agent's payment destinations. You can search by name, contact details, account information, and other criteria.

## Basic Usage

### Retrieve All Destinations

To get a list of all payment destinations associated with your agent:

```typescript
const allDestinations = await payman.payments.searchDestinations();
console.log(`Found ${allDestinations.length} payment destinations`);
```

### Search with Specific Filters

Use filters to narrow down your search results:

```typescript
const filteredDestinations = await payman.payments.searchDestinations({
	name: "John", // Partial name match
	contactEmail: "john@example.com",
	type: "US_ACH",
});
```

## Available Search Filters

| Filter               | Type     | Description                                                                |
| -------------------- | -------- | -------------------------------------------------------------------------- |
| `name`               | string   | Search by destination name (partial match)                                 |
| `contactEmail`       | string   | Search by contact email address                                            |
| `contactPhoneNumber` | string   | Search by contact phone number                                             |
| `contactTaxId`       | string   | Search by tax identification number                                        |
| `accountNumber`      | string   | Search by last 4 digits of bank account number                             |
| `routingNumber`      | string   | Search by bank routing number                                              |
| `type`               | string   | Filter by destination type (`US_ACH`, `CRYPTO_ADDRESS`, or `PAYMAN_AGENT`) |
| `customerId`         | string   | Filter by your system's customer ID                                        |
| `status`             | string   | Filter by status (`ACTIVE`, `ARCHIVED`, or `DELETED`)                      |
| `tags`               | string[] | Filter by tags (array of tag strings)                                      |

## Search Examples

### Search by Destination Type

Find destinations of a specific type:

```typescript
// Find all ACH bank account destinations
const achDestinations = await payman.payments.searchDestinations({
	type: "US_ACH",
});

// Find all cryptocurrency wallet destinations
const cryptoDestinations = await payman.payments.searchDestinations({
	type: "CRYPTO_ADDRESS",
});

// Find all Payman agent destinations
const agentDestinations = await payman.payments.searchDestinations({
	type: "PAYMAN_AGENT",
});
```

### Search by Contact Information

Search for destinations using contact details:

```typescript
// Search by email
const emailSearch = await payman.payments.searchDestinations({
	contactEmail: "finance@company.com",
});

// Search by phone number
const phoneSearch = await payman.payments.searchDestinations({
	contactPhoneNumber: "+1234567890",
});

// Combined search
const contactSearch = await payman.payments.searchDestinations({
	contactEmail: "support@company.com",
	contactPhoneNumber: "+1234567890",
});
```

### Search by Tags

Filter destinations by tags:

```typescript
// Find destinations tagged as 'vendor'
const vendorDestinations = await payman.payments.searchDestinations({
	tags: ["vendor"],
});

// Find destinations with multiple tags
const taggedDestinations = await payman.payments.searchDestinations({
	tags: ["primary", "monthly"],
});
```

## Response Structure

The search method returns an array of payment destination objects:

```typescript
[
	{
		id: "dest_123abc", // Unique identifier
		name: "John Doe", // Display name
		type: "US_ACH", // Destination type
		organizationId: "org_xyz", // Your organization ID
		status: "ACTIVE", // Current status
		contactDetails: {
			contactType: "individual",
			email: "john@example.com",
			phoneNumber: "+1234567890",
			address: "123 Main St",
			taxId: "***-**-6789", // Partially masked for security
		},
		tags: ["primary", "vendor"],
		createdAt: "2024-01-22T10:00:00Z",
		updatedAt: "2024-01-22T10:00:00Z",
	},
	// Additional destinations...
];
```

## Error Handling

Implement proper error handling to manage issues that may arise during searches:

```typescript
try {
	const destinations = await payman.payments.searchDestinations({
		name: "John",
		type: "US_ACH",
	});

	console.log(`Found ${destinations.length} matching destinations`);
} catch (error) {
	if (error.code === "invalid_parameter") {
		console.error("Invalid search parameter provided");
	} else if (error.code === "rate_limit_exceeded") {
		console.error("Too many search requests. Please try again later.");
	} else {
		console.error("Search operation failed:", error.message);
	}
}
```

<Note>
	**Security Note:** For your protection, sensitive information such as
	account numbers, tax IDs, and other personal identifiers are partially
	masked in search results. Only the last 4 digits of account numbers and
	similar sensitive data are visible.
</Note>
